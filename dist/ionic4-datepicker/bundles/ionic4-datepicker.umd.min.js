!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@ionic/angular"),require("@angular/common")):"function"==typeof define&&define.amd?define("ionic4-datepicker",["exports","@angular/core","@angular/forms","@ionic/angular","@angular/common"],e):e(t["ionic4-datepicker"]={},t.ng.core,t.ng.forms,t.angular,t.ng.common)}(this,function(t,e,n,o,i){"use strict";var a=function(){function t(){}return t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}();function r(o,i){var a,r,s,t,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function n(t){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,r&&(s=2&t[0]?r["return"]:t[0]?r["throw"]||((s=r["return"])&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,r=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){c.label=t[1];break}if(6===t[0]&&c.label<s[1]){c.label=s[1],s=t;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(t);break}s[2]&&c.ops.pop(),c.trys.pop();continue}t=i.call(o,c)}catch(e){t=[6,e],r=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}var s=function(){function t(t,e){this.navParams=t,this.modalCtrl=e,this.config={titleLabel:null,setLabel:"Set",todayLabel:"Today",closeLabel:"Close",inputDate:new Date,mondayFirst:!0,weeksList:["S","M","T","W","T","F","S"],monthsList:["Jan","Feb","March","April","May","June","July","Aug","Sept","Oct","Nov","Dec"],templateType:"popup",showTodayButton:!1,closeOnSelect:!1,disableWeekdays:[]},this.mainObj={},this.disabledDates=[],this.disableWeekdays=[],this.data={currentMonth:"",currentYear:"",currentMonthSelected:""},this.rows=[0,7,14,21,28,35],this.cols=[0,1,2,3,4,5,6],this.monthsList=["January","February","March","April","May","June","July","August","September","October","November","December"],this.weeksList=["S","M","T","W","T","F","S"],this.yearsList=[],this.daysList=[],this.today=this.resetHMSM(new Date).getTime(),this.mainObj=this.navParams.get("mainObj")}return t.prototype.ngOnInit=function(){this.initDatePicker(this.mainObj)},t.prototype.resetHMSM=function(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},t.prototype.prevMonth=function(){1===this.currentDate.getMonth()&&this.currentDate.setFullYear(this.currentDate.getFullYear()),this.currentDate.setMonth(this.currentDate.getMonth()-1),this.data.currentMonth=this.mainObj.monthsList[this.currentDate.getMonth()],this.data.currentYear=this.currentDate.getFullYear(),this.refreshDateList(this.currentDate)},t.prototype.nextMonth=function(){11===this.currentDate.getMonth()&&this.currentDate.setFullYear(this.currentDate.getFullYear()),this.currentDate.setDate(1),this.currentDate.setMonth(this.currentDate.getMonth()+1),this.data.currentMonth=this.mainObj.monthsList[this.currentDate.getMonth()],this.data.currentYear=this.currentDate.getFullYear(),this.monthChanged(this.currentDate.getMonth()),this.refreshDateList(this.currentDate)},t.prototype.changeDaySelected=function(){var t=new Date(this.selctedDateEpoch);t.setMonth(this.currentDate.getMonth()),t.setYear(this.currentDate.getFullYear()),this.selctedDateEpoch=t.getTime(),this.selectedDateString=this.formatDate()},t.prototype.dateSelected=function(t){if(!t.disabled){if(!t||0===Object.keys(t).length)return;this.selctedDateEpoch=t.epoch,this.selectedDateString=this.formatDate(),this.mainObj.closeOnSelect&&("popup"===this.mainObj.templateType.toLowerCase()||this.closeModal(this.selctedDateEpoch))}},t.prototype.setIonicDatePickerTodayDate=function(){var t=new Date(this.today),e={date:t.getDate(),month:t.getMonth(),year:t.getFullYear(),day:t.getDay(),epoch:t.getTime(),disabled:!1};this.dateSelected(e),this.refreshDateList(new Date),this.selctedDateEpoch=this.resetHMSM(t).getTime(),this.selectedDateString=this.formatDate()},t.prototype.setIonicDatePickerDate=function(){this.closeModal(this.selctedDateEpoch)},t.prototype.setDisabledDates=function(t){if(t.disabledDates&&0!==t.disabledDates.length){this.disabledDates=[];for(var e=0;e<t.disabledDates.length;e++)this.disabledDates.push(this.resetHMSM(new Date(t.disabledDates[e])).getTime())}else this.disabledDates=[]},t.prototype.refreshDateList=function(t){t=this.resetHMSM(t),this.currentDate=t;var e,n,o=new Date(t.getFullYear(),t.getMonth(),1).getDate(),i=new Date(t.getFullYear(),t.getMonth()+1,0).getDate();this.monthsList=[],this.mainObj.monthsList&&12===this.mainObj.monthsList.length?this.monthsList=this.mainObj.monthsList:this.monthsList=this.monthsList,this.yearsList=this.getYearsList(this.mainObj.from,this.mainObj.to),this.daysList=[],this.firstDayEpoch=this.resetHMSM(new Date(t.getFullYear(),t.getMonth(),o)).getTime(),this.lastDayEpoch=this.resetHMSM(new Date(t.getFullYear(),t.getMonth(),i)).getTime();for(var a=o;a<=i;a++)e=new Date(t.getFullYear(),t.getMonth(),a),this.fromDate&&this.toDate&&(n=e.getTime()<this.fromDate||e.getTime()>this.toDate||0<=this.mainObj.disableWeekDays.indexOf(e.getDay())),this.daysList.push({date:e.getDate(),month:e.getMonth(),year:e.getFullYear(),day:e.getDay(),epoch:e.getTime(),disabled:n});var r=this.daysList[0].day-this.mainObj.mondayFirst;r=r<0?6:r;for(var s=0;s<r;s++)this.daysList.unshift({});this.rows=[0,7,14,21,28,35],this.cols=[0,1,2,3,4,5,6],this.data.currentMonth=this.mainObj.monthsList[t.getMonth()],this.data.currentYear=t.getFullYear(),this.data.currentMonthSelected=this.data.currentMonth,this.currentYearSelected=this.data.currentYear,this.numColumns=7},t.prototype.monthChanged=function(t){t&&t.target&&t.target.value&&(this.data.currentMonth=t.target.value);var e=this.monthsList.indexOf(this.data.currentMonth);this.currentDate.setMonth(e),this.refreshDateList(this.currentDate)},t.prototype.yearChanged=function(t){t&&t.target&&t.target.value&&(this.data.currentYear=t.target.value),this.currentDate.setFullYear(this.data.currentYear),this.refreshDateList(this.currentDate)},t.prototype.setInitialObj=function(t){this.mainObj=t,this.selctedDateEpoch=this.resetHMSM(this.mainObj.inputDate).getTime(),this.selectedDateString=this.formatDate(),this.mainObj.weeksList&&7===this.mainObj.weeksList.length?this.weeksList=this.mainObj.weeksList:this.weeksList=["S","M","T","W","T","F","S"],this.mainObj.mondayFirst&&this.weeksList.push(this.mainObj.weeksList.shift()),this.disableWeekdays=this.mainObj.disableWeekDays,this.refreshDateList(this.mainObj.inputDate),this.setDisabledDates(this.mainObj)},t.prototype.closeModal=function(t){this.modalCtrl.getTop(),this.modalCtrl.dismiss({date:t})},t.prototype.closeIonicDatePickerModal=function(){this.closeModal(null)},t.prototype.getYearsList=function(t,e){var n=[],o=1900,i=(new Date).getFullYear()+1;o=t?new Date(t).getFullYear():o,i=e?new Date(e).getFullYear():i;for(var a=o;a<=i;a++)n.push(a);return n},t.prototype.initDatePicker=function(t){this.fromDate="",this.toDate="",this.mainObj.from&&(this.fromDate=this.resetHMSM(new Date(this.mainObj.from)).getTime()),this.mainObj.to&&(this.toDate=this.resetHMSM(new Date(this.mainObj.to)).getTime()),t.disableWeekdays&&this.config.disableWeekdays&&(this.mainObj.disableWeekDays=t.disableWeekdays.concat(this.config.disableWeekdays)),this.setInitialObj(this.mainObj)},t.prototype.formatDate=function(){var t=new Date(this.selctedDateEpoch).getDate();return t<10&&(t="0"+t),new Date(this.selctedDateEpoch).getFullYear()+" "+this.config.monthsList[new Date(this.selctedDateEpoch).getMonth()]+" "+t},t.decorators=[{type:e.Component,args:[{selector:"ionic4-ionic4-datepicker-modal",template:'<ion-header>\n  <ion-toolbar>\n    <ion-title>\n      {{selectedDateString}}\n    </ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content no-padding class="ionic_datepicker_modal_content">\n\n  <ion-grid class="dp-month-year-container">\n    <ion-row>\n\n      <ion-col size="1.5" class="dp-left-right-arrow" (click)="prevMonth()">\n        <ion-button [ngClass]="{\'pointer_events_none\':((firstDayEpoch - 86400000) < fromDate)}">\n          <ion-icon name="arrow-back"></ion-icon>\n        </ion-button>\n      </ion-col>\n\n      <ion-col size="9">\n        <ion-grid>\n          <ion-row>\n            <ion-col size="5.5" no-padding>\n              <select class="dp-select" (change)="monthChanged($event)">\n                <option *ngFor="let month of mainObj?.monthsList;" [selected]="data.currentMonth == month" value="{{month}}">\n                  {{month}}\n                </option>\n              </select>\n              <ion-icon name="md-arrow-dropdown" class="dp-down-arrow"></ion-icon>\n            </ion-col>\n            <ion-col size="1"></ion-col>\n            <ion-col size="5.5" no-padding>\n              <select class="dp-select" (change)="yearChanged($event)">\n                <option *ngFor="let year of yearsList;" [selected]="data.currentYear == year" value="{{year}}">\n                  {{year}}\n                </option>\n              </select>\n              <ion-icon name="md-arrow-dropdown" class="dp-down-arrow"></ion-icon>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ion-col>\n\n      <ion-col size="1.5" class="dp-left-right-arrow" (click)="nextMonth()">\n        <ion-button [ngClass]="{\'pointer_events_none\':((lastDayEpoch + 86400000)> toDate)}">\n          <ion-icon name="arrow-forward"></ion-icon>\n        </ion-button>\n      </ion-col>\n\n    </ion-row>\n  </ion-grid>\n\n  <ion-grid class="dp-weeks-container" *ngIf="daysList">\n    <ion-row class="dp-weeks-name">\n      <ion-col *ngFor="let weekName of mainObj?.weeksList;">\n        <div class="weeks">{{weekName}}</div>\n      </ion-col>\n    </ion-row>\n\n    <ion-row *ngFor="let row of rows;" class="dp-days-list">\n      <ion-col *ngFor="let col of cols; let i = index ;" (click)="dateSelected(daysList[row + i])" no-padding [ngClass]="{\'dp-selecteddate\': (daysList[row + i]?.epoch === selctedDateEpoch),\n                                \'dp-today\' : (daysList[row + i]?.epoch == today),\n                                \'disabled\' : (daysList[row + i]?.disabled),\n                                \'dp-pointer-events-none\':((disabledDates.indexOf(daysList[row + i]?.epoch) >= 0) || (daysList[row + i]?.disabled))}">\n        <div class="days">{{daysList[row + col]?.date}}</div>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n</ion-content>\n\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-grid no-padding>\n      <ion-row no-padding>\n        <ion-col size="4" no-padding>\n          <ion-button class="ion-button dp-buttons" (click)="closeIonicDatePickerModal()">\n            {{config?.closeLabel}}\n          </ion-button>\n        </ion-col>\n        <ion-col size="4" no-padding>\n          <ion-button class="ion-button dp-buttons" *ngIf="mainObj?.showTodayButton" (click)="setIonicDatePickerTodayDate()">\n            {{config?.todayLabel}}\n          </ion-button>\n        </ion-col>\n        <ion-col size="4" no-padding>\n          <ion-button class="ion-button dp-buttons" *ngIf="!mainObj?.closeOnSelect" (click)="setIonicDatePickerDate()">\n            {{config?.setLabel}}\n          </ion-button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>',styles:[":host ion-header{height:60px}:host ion-header ion-toolbar{--background:#f9a200!important;height:100%;align-items:center;display:flex;color:#fff}:host ion-header ion-toolbar ion-title{font-size:20px;font-weight:700;text-align:center}:host .ionic_datepicker_modal_content .dp-month-year-container{height:15%}:host .ionic_datepicker_modal_content .dp-month-year-container ion-col{display:flex;justify-content:center;align-items:center}:host .ionic_datepicker_modal_content .dp-month-year-container ion-col ion-grid{width:100%}:host .ionic_datepicker_modal_content .dp-month-year-container ion-col ion-grid .dp-select{padding:8px 4px;width:100%;border:0;border-radius:0;border-bottom:1.5px solid #f9a200!important;background:0 0;position:relative;text-align:center;text-align-last:center;z-index:1;-webkit-appearance:none}:host .ionic_datepicker_modal_content .dp-month-year-container ion-col ion-grid .dp-select:focus{outline:0}:host .ionic_datepicker_modal_content .dp-month-year-container ion-col ion-grid .dp-down-arrow{position:absolute;width:20%;right:0;height:45%;color:#f9a200!important}:host .ionic_datepicker_modal_content .dp-month-year-container .dp-left-right-arrow ion-button{--background:transparent!important;--box-shadow:unset!important;color:#f9a200!important}:host .ionic_datepicker_modal_content .dp-month-year-container .dp-left-right-arrow ion-button:focus{outline:0}:host .ionic_datepicker_modal_content .dp-month-year-container .dp-left-right-arrow ion-button.activated{--ion-color-primary-shade:transparent!important;--ion-color-primary-contrast:#737373!important}:host .ionic_datepicker_modal_content .dp-weeks-container{margin:6% 0}:host .ionic_datepicker_modal_content .dp-weeks-container .dp-weeks-name ion-col{display:flex;justify-content:center;padding:15px}:host .ionic_datepicker_modal_content .dp-weeks-container .dp-weeks-name ion-col .weeks{width:14%;display:flex;justify-content:center;font-weight:700}:host .ionic_datepicker_modal_content .dp-weeks-container .dp-days-list ion-col{display:flex;justify-content:center;padding:10px}:host .ionic_datepicker_modal_content .dp-weeks-container .dp-days-list ion-col .days{width:14%;display:flex;justify-content:center}:host .ionic_datepicker_modal_content .dp-selecteddate{background:#f9a200!important;color:#fff!important;border-radius:4px;font-weight:500!important}:host .ionic_datepicker_modal_content .dp-today{border-radius:4px;font-weight:500!important;border:1px solid #f9a200!important}:host .ionic_datepicker_modal_content .dp-pointer-events-none{background:0 0;border-radius:4px;font-weight:300}:host .disabled{color:#aaa}:host ion-footer{height:55px!important}:host ion-footer ion-toolbar{height:100%!important;--border-width:0;--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px}:host ion-footer ion-toolbar .toolbar-container{height:100%!important}:host ion-footer ion-toolbar ion-grid{height:-webkit-fill-available!important}:host ion-footer ion-toolbar ion-grid ion-row{height:-webkit-fill-available!important}:host ion-footer ion-toolbar ion-grid ion-row ion-col{height:-webkit-fill-available!important}:host ion-footer ion-toolbar ion-button{--background:#f9a200!important;--border-radius:0;width:100%;height:55px;font-size:16px;font-weight:500!important;color:#fff!important;margin:0}:host ion-footer ion-toolbar ion-button:focus{outline:0}:host ion-footer ion-toolbar ion-button.activated{--background-activated:#e69602!important;--color-activated:white!important}"]}]}],t.ctorParameters=function(){return[{type:o.NavParams},{type:o.ModalController}]},t}(),c=function(){},l={provide:n.NG_VALUE_ACCESSOR,useExisting:e.forwardRef(function(){return d}),multi:!0},d=function(){function t(t){this.modalCtrl=t,this.selectedDate={},this.innerValue="",this.onTouchedCallback=c,this.onChangeCallback=c}return t.prototype.ngOnInit=function(){},t.prototype.openDatePicker=function(o){return function t(e,r,s,c){return new(s||(s=Promise))(function(t,n){function o(t){try{a(c.next(t))}catch(e){n(e)}}function i(t){try{a(c["throw"](t))}catch(e){n(e)}}function a(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(o,i)}a((c=c.apply(e,r||[])).next())})}(this,void 0,void 0,function(){var e,n,i=this;return r(this,function(t){switch(t.label){case 0:return this.selectedDate.date=o,this.inputDate.from&&(this.selectedDate.from=this.inputDate.from),this.inputDate.to&&(this.selectedDate.to=this.inputDate.to),(e={monthsList:["Jan","Feb","March","April","May","June","July","Aug","Sept","Oct","Nov","Dec"],closeOnSelect:!1,templateType:"popup"}).from=this.selectedDate.from?this.selectedDate.from:"",e.to=this.selectedDate.to?this.selectedDate.to:"",e.disableWeekDays=[],e.mondayFirst=1,e.weeksList=["S","M","T","W","T","F","S"],e.showTodayButton=!0,this.selectedDate.date?e.inputDate=new Date(this.selectedDate.date):e.inputDate=new Date,[4,this.modalCtrl.create({component:s,cssClass:"ionic4-datePicker",componentProps:{mainObj:e}})];case 1:return[4,(n=t.sent()).present()];case 2:return t.sent(),n.onDidDismiss().then(function(t){if(t.data&&t.data.date){i.selectedDate.date=t.data.date;var e=new Date(t.data.date).getDate(),n=new Date(t.data.date).getFullYear(),o=new Date(t.data.date).getMonth()+1;e<10&&(e="0"+e),o<10&&(o="0"+o),i.value=n+"-"+o+"-"+e}}),[2]}})})},Object.defineProperty(t.prototype,"value",{get:function(){return this.innerValue},set:function(t){t!==this.innerValue&&(this.innerValue=t,this.onChangeCallback(t))},enumerable:!0,configurable:!0}),t.prototype.onBlur=function(){this.onTouchedCallback()},t.prototype.writeValue=function(t){t!==this.innerValue&&(this.innerValue=t)},t.prototype.registerOnChange=function(t){this.onChangeCallback=t},t.prototype.registerOnTouched=function(t){this.onTouchedCallback=t},t.decorators=[{type:e.Component,args:[{selector:"ionic4-datepicker",template:'<ion-item (click)="openDatePicker(value)">\n    <input type="text" (focus)="$event.preventDefault()" readonly [(ngModel)]="value" start />\n    <ion-icon name="calendar" end></ion-icon>\n</ion-item>',providers:[l],styles:[":host ion-item{--background:#d7d7d7;--inner-border-width:0;--border-width:0;--border-radius:4px;margin:8px 0}:host ion-item input{font-size:16px;margin:6px 0;background:#d7d7d7;border:none;width:100%}@media (min-width:768px){:host ion-item input{font-size:18px}}:host ion-item input.has-focus,:host ion-item input:focus{outline:0;box-shadow:unset}:host ion-item ion-icon{color:#737373;margin-right:8px}"]}]}],t.ctorParameters=function(){return[{type:o.ModalController}]},t.propDecorators={inputDate:[{type:e.Input}]},t}(),h=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[d,s],imports:[n.FormsModule,n.ReactiveFormsModule,i.CommonModule,o.IonicModule],exports:[d,s],entryComponents:[s]}]}],t}();t.Ionic4DatepickerService=a,t.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR=l,t.Ionic4DatepickerComponent=d,t.Ionic4DatepickerModule=h,t.ɵa=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ionic4-datepicker.umd.min.js.map